(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{a0af27d67c69d80c5afc:function(e,t,a){"use strict";a.r(t);function n(){return l.a.createElement(d,{className:"header"},l.a.createElement("div",{className:"logo"}),l.a.createElement(f.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},l.a.createElement(f.a.Item,{key:"1"},"子服务群")))}var r=a("8af190b70a6bc55c6f1b"),l=a.n(r),c=a("63f14ac74ce296f77f4d"),o=a.n(c),s=a("42993e61ed154f509e4c"),i=a("0a81c721557e72a0975d"),u=(a("307f2cff2703da2bb432"),a("a456258d01ac4489d4c1"),a("a1933480ea41dadc03da"),a("0e20a1f5a80e4ab4964b")),f=a("2908b30917805c6fbf09"),d=u.a.Header,m=a("849c435b1f06682c313a"),p=a.n(m),h=a("1d967fc85bef35702fd2"),v=a.n(h),b=a("19e15e7ca84589004246"),y=a.n(b),E=a("66f6f74ce0dacb46302a"),x=a.n(E),g=a("27f61890603953b946f7"),S=a.n(g),w=a("6b516fd2a35c7f9ebca4"),k=a.n(w),I=a("837788ac52fbe4a0f8ce"),N=a.n(I),C=a("c031845d0dca9c262c7b"),M=a.n(C),A=a("279f1c7ef5f95c5d63e2"),D=a.n(A),j=a("9c772359e08e81b5b3ba"),P=a.n(j),R=a("bf6c09c321da609d13e2"),T=a("ceecf8d1195f0f73ea89"),O=function(){return v()(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/srevicesMap",{method:"POST"});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",{data:a,type:"refresh"});case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}))()},H=function(e,t,a,n){return{serviceItems:e,serviceName:t,routerCMD:a,method:n,type:"choose"}},U=a("1f7eb4558e149d7a2535"),B=Object(U.b)({serviceItems:function(e,t){var a=0<arguments.length&&void 0!==e?e:[],n=1<arguments.length?t:void 0;switch(n.type){case"refresh":return n.data&&P.a.isArray(n.data)?a.concat(n.data):a.concat(["Lucy","Lily"]);default:return a}},chooseService:function(e,t){var a=0<arguments.length&&void 0!==e?e:null,n=1<arguments.length?t:void 0,r=n.serviceItems;if(!r||!P.a.isArray(r)||r.length<=0)return a;switch(n.type){case"choose":var c=r.find(function(e){return e.sname===n.serviceName});if(!c||!P.a.isArray(c.routers)||c.routers.length<=0)return a;var o=c.routers.find(function(e){return e.cmd===n.routerCMD&&e.method===n.method});return o&&P.a.isObject(o)?{serviceName:c.sname,title:c.title,describe:c.describe,version:c.version,apiName:o.name,cmd:o.cmd,method:o.method}:a;default:return a}}}),J=Object(U.c)(B,{serviceItems:[],chooseService:null});function L(n){return function(){var e,t=M()(n);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var a=M()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return N()(this,e)}}var W=f.a.SubMenu,z=u.a.Sider,G=function(e){k()(n,e);var t,a=L(n);function n(e){var t;return y()(this,n),t=a.call(this,e),D()(S()(t),"state",{}),t.onMenuItemsUpdate=t.onMenuItemsUpdate.bind(S()(t)),t}return x()(n,[{key:"componentWillMount",value:(t=v()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.subscribe(this.onMenuItemsUpdate),e.next=3,this.props.onRefresh();case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"onMenuItemsUpdate",value:function(){var s=this,e=J.getState().serviceItems,t=P.a.isArray(e)&&0<e.length?e.map(function(o,t){var e=o.routers;return l.a.createElement(W,{key:"m"+t,title:l.a.createElement("span",null," ",l.a.createElement(R.a,null)," ",o.title," ")},e.map(function(c,e){return l.a.createElement(f.a.Item,{key:"m"+t+"r"+e,onClick:function(){return e={serviceName:o.sname,routerCMD:c.cmd,method:c.method},t=J.getState().serviceItems,a=e.serviceName,n=e.routerCMD,r=e.method,void("function"==typeof s.props.onChooseMenuitem&&s.props.onChooseMenuitem(t,a,n,r));var e,t,a,n,r}},c.name)}))}):l.a.createElement(W,{title:l.a.createElement("span",null," ",l.a.createElement(T.a,null),"无服务 ")});this.setState({SubMenus:t})}},{key:"render",value:function(){var e=this.state.SubMenus;return l.a.createElement(z,{width:200,className:"site-layout-background"},l.a.createElement(f.a,{mode:"inline",defaultSelectedKeys:["1"],style:{height:"100%",borderRight:0}},e))}}]),n}(l.a.PureComponent);var K=Object(i.b)(function(e,t){return{}},function(r,e){return{onRefresh:function(){return v()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,O();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}},e)}))()},onChooseMenuitem:function(e,t,a,n){r(H(e,t,a,n))}}})(G),q=a("8ca0435fe92d5e05db5b"),V=a("3c26823293661d61be33"),$=a("43644f4a8185d47f48e3"),F=a("70a973a0262e0083783d"),Q=a("70fc35ebabf20c0c9bd9"),X=a("de88b1dd3ca3155569b0"),Y=a("e0239d13096660238942");a("ae088dd9392b8d86db53");function Z(n){return function(){var e,t=M()(n);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var a=M()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return N()(this,e)}}var _=u.a.Content,ee=q.a.Search,te=q.a.TextArea,ae=function(e){k()(r,e);var t,a,n=Z(r);function r(e){var t;return y()(this,r),t=n.call(this,e),D()(S()(t),"state",{testContext:"result: ",resDataType:"json",apiHeader:'{"Content-Type": "application/json", "authorization":"xxx"}'}),t.onAPIsUpdate=t.onAPIsUpdate.bind(S()(t)),t.onTestAPI=t.onTestAPI.bind(S()(t)),t}return x()(r,[{key:"componentWillMount",value:(a=v()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.subscribe(this.onAPIsUpdate);case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"onAPIsUpdate",value:function(){var e=J.getState().chooseService;this.setState({serviceData:e})}},{key:"onTestAPI",value:(t=v()(p.a.mark(function e(t){var a,n,r,c,o,s,i,u,l,f,d,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.serviceName,n=t.cmd,r=t.method,c=t.params,o=this.state.resDataType,s={},!(i=this.state.apiHeader)){e.next=12;break}e.prev=5,s=JSON.parse(i),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(5),e.abrupt("return",alert("Headers 必须是有效的 JSON 格式。"));case 12:return e.prev=12,r=r.toUpperCase(),c=JSON.parse("{".concat(c,"}")),"text"===o&&(c.dataType="text"),u="/".concat(a,"/").concat(n),l={method:r},"GET"===r||"HEAD"===r?(f=[],Object.keys(c).forEach(function(e){return f.push(e+"="+c[e])}),u+="?"+f.join("&")):l.body=JSON.stringify(c),l.headers=s,this.setState({apiLoadding:!0}),e.next=23,fetch(u,l);case 23:return d=e.sent,e.next=26,d.text();case 26:m=e.sent,this.setState({apiLoadding:!1}),this.setState({testContext:m}),e.next=35;break;case 31:e.prev=31,e.t1=e.catch(12),this.setState({testContext:String(e.t1)});case 35:case"end":return e.stop()}},e,this,[[5,9],[12,31]])})),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var a=this,e=this.state.serviceData;if(!e)return l.a.createElement("div",null);var t=this.state.testContext,n=e.serviceName,r=e.title,c=e.describe,o=e.version,s=e.apiName,i=e.cmd,u=e.method;return l.a.createElement("div",null,l.a.createElement("div",{className:"site-page-header-ghost-wrapper"},l.a.createElement(V.a,{ghost:!1,title:r+"("+n+")",subTitle:c},l.a.createElement($.a,{size:"small",column:3},l.a.createElement($.a.Item,{label:"命令"},l.a.createElement("a",null,i)),l.a.createElement($.a.Item,{label:"调用"},"ctx.app.seneca('",n,"', '",i,"', options)"),l.a.createElement($.a.Item,{label:"版本"},o),l.a.createElement($.a.Item,{label:"描述"},s),l.a.createElement($.a.Item,{label:"网关接口"},"[",u,"] ",l.a.createElement("a",null,"/",n,"/",i))))),l.a.createElement(_,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},l.a.createElement($.a,{title:"API测试",layout:"vertical",column:1,bordered:!0},l.a.createElement($.a.Item,{label:'输入，例：{"name": "Lucy", "age": 13}'},l.a.createElement(F.a,{flex:"100px"},"Headers: "),l.a.createElement(te,{rows:4,value:this.state.apiHeader,onChange:function(e){a.setState({apiHeader:e.target.value})}}),l.a.createElement(Q.a,{style:{margin:"10px 0"}},l.a.createElement(F.a,{flex:"100px"},"响应数据格式: "),l.a.createElement(F.a,{flex:"auto"},l.a.createElement(X.a.Group,{defaultValue:"json",buttonStyle:"solid",onChange:function(e){a.setState({resDataType:e.target.value})}},l.a.createElement(X.a.Button,{value:"json"},"json"),l.a.createElement(X.a.Button,{value:"text"},"text"),l.a.createElement(X.a.Button,{value:"formdata",disabled:!0},"formdata"),l.a.createElement(X.a.Button,{value:"buffer",disabled:!0},"buffer")))),l.a.createElement(ee,{addonBefore:"Json参数: ",prefix:"{",suffix:"}",placeholder:"输入json格式参数",enterButton:"执行命令",onSearch:function(){var t=v()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onTestAPI({serviceName:n,cmd:i,method:u,params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()})),l.a.createElement($.a.Item,{label:"执行结果"},this.state.apiLoadding?l.a.createElement(Y.a,null):l.a.createElement("iframe",{width:"100%",height:"500px",frameBorder:"0",seamless:!0,srcDoc:t})))))}}]),r}(l.a.Component);function ne(){return l.a.createElement(u.a,null,l.a.createElement(K,null),l.a.createElement(u.a,{style:{padding:"0 24px 24px"}},l.a.createElement(oe,null)))}function re(){return l.a.createElement(u.a,{className:"main-layout"},l.a.createElement(n,null),l.a.createElement(ne,null))}function ce(){return l.a.createElement("div",null,l.a.createElement(re,null))}var oe=Object(i.b)(function(e,t){return{}},function(e,t){return{}})(ae),se=a("fc983e7dc87689180e18");o.a.render(l.a.createElement(i.a,{store:J},l.a.createElement(s.a,null,l.a.createElement(ce,null))),document.querySelector("#root")),se.a()},a1933480ea41dadc03da:function(e,t,a){},ae088dd9392b8d86db53:function(e,t,a){},fc983e7dc87689180e18:function(e,a,n){"use strict";(function(e){n.d(a,"a",function(){return t});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function t(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}}).call(this,n("26d59f808dff3e83c741"))}},[["a0af27d67c69d80c5afc",1,2]]]);