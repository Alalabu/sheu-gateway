(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{a0af27d67c69d80c5afc:function(e,t,a){"use strict";a.r(t);function n(){return l.a.createElement(d,{className:"header"},l.a.createElement("div",{className:"logo"}),l.a.createElement(f.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},l.a.createElement(f.a.Item,{key:"1"},"子服务群")))}var r=a("8af190b70a6bc55c6f1b"),l=a.n(r),c=a("63f14ac74ce296f77f4d"),o=a.n(c),s=a("42993e61ed154f509e4c"),u=a("0a81c721557e72a0975d"),i=(a("307f2cff2703da2bb432"),a("a456258d01ac4489d4c1"),a("a1933480ea41dadc03da"),a("0e20a1f5a80e4ab4964b")),f=a("2908b30917805c6fbf09"),d=i.a.Header,m=a("849c435b1f06682c313a"),p=a.n(m),h=a("1d967fc85bef35702fd2"),v=a.n(h),b=a("19e15e7ca84589004246"),y=a.n(b),E=a("66f6f74ce0dacb46302a"),x=a.n(E),g=a("27f61890603953b946f7"),k=a.n(g),w=a("6b516fd2a35c7f9ebca4"),I=a.n(w),S=a("837788ac52fbe4a0f8ce"),N=a.n(S),C=a("c031845d0dca9c262c7b"),M=a.n(C),j=a("279f1c7ef5f95c5d63e2"),A=a.n(j),D=a("9c772359e08e81b5b3ba"),P=a.n(D),R=a("bf6c09c321da609d13e2"),T=a("ceecf8d1195f0f73ea89"),O=function(){return v()(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/srevicesMap",{method:"POST"});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",{data:a,type:"refresh"});case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}))()},U=function(e,t,a){return{serviceItems:e,serviceName:t,routerCMD:a,type:"choose"}},B=a("1f7eb4558e149d7a2535"),J=Object(B.b)({serviceItems:function(e,t){var a=0<arguments.length&&void 0!==e?e:[],n=1<arguments.length?t:void 0;switch(n.type){case"refresh":return n.data&&P.a.isArray(n.data)?a.concat(n.data):a.concat(["Lucy","Lily"]);default:return a}},chooseService:function(e,t){var a=0<arguments.length&&void 0!==e?e:null,n=1<arguments.length?t:void 0,r=n.serviceItems;if(!r||!P.a.isArray(r)||r.length<=0)return a;switch(n.type){case"choose":var c=r.find(function(e){return e.sname===n.serviceName});if(!c||!P.a.isArray(c.routers)||c.routers.length<=0)return a;var o=c.routers.find(function(e){return e.cmd===n.routerCMD});return o&&P.a.isObject(o)?{serviceName:c.sname,title:c.title,describe:c.describe,version:c.version,apiName:o.name,cmd:o.cmd,method:o.method}:a;default:return a}}}),W=Object(B.c)(J,{serviceItems:[],chooseService:null});function H(n){return function(){var e,t=M()(n);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var a=M()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return N()(this,e)}}var L=f.a.SubMenu,z=i.a.Sider,G=function(e){I()(n,e);var t,a=H(n);function n(e){var t;return y()(this,n),t=a.call(this,e),A()(k()(t),"state",{}),t.onMenuItemsUpdate=t.onMenuItemsUpdate.bind(k()(t)),t}return x()(n,[{key:"componentWillMount",value:(t=v()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.subscribe(this.onMenuItemsUpdate),e.next=3,this.props.onRefresh();case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"onMenuItemsUpdate",value:function(){var o=this,e=W.getState().serviceItems,t=P.a.isArray(e)&&0<e.length?e.map(function(c,t){var e=c.routers;return l.a.createElement(L,{key:"m"+t,title:l.a.createElement("span",null," ",l.a.createElement(R.a,null)," ",c.title," ")},e.map(function(r,e){return l.a.createElement(f.a.Item,{key:"m"+t+"r"+e,onClick:function(){return e={serviceName:c.sname,routerCMD:r.cmd},t=W.getState().serviceItems,a=e.serviceName,n=e.routerCMD,void("function"==typeof o.props.onChooseMenuitem&&o.props.onChooseMenuitem(t,a,n));var e,t,a,n}},r.name)}))}):l.a.createElement(L,{title:l.a.createElement("span",null," ",l.a.createElement(T.a,null),"无服务 ")});this.setState({SubMenus:t})}},{key:"render",value:function(){var e=this.state.SubMenus;return l.a.createElement(z,{width:200,className:"site-layout-background"},l.a.createElement(f.a,{mode:"inline",defaultSelectedKeys:["1"],style:{height:"100%",borderRight:0}},e))}}]),n}(l.a.PureComponent);var K=Object(u.b)(function(e,t){return{}},function(n,e){return{onRefresh:function(){return v()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,O();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}},e)}))()},onChooseMenuitem:function(e,t,a){n(U(e,t,a))}}})(G),q=a("8ca0435fe92d5e05db5b"),V=a("3c26823293661d61be33"),$=a("43644f4a8185d47f48e3"),F=a("70fc35ebabf20c0c9bd9"),Q=a("70a973a0262e0083783d"),X=a("de88b1dd3ca3155569b0");a("ae088dd9392b8d86db53");function Y(n){return function(){var e,t=M()(n);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var a=M()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return N()(this,e)}}var Z=i.a.Content,_=q.a.Search,ee=function(e){I()(r,e);var t,a,n=Y(r);function r(e){var t;return y()(this,r),t=n.call(this,e),A()(k()(t),"state",{testContext:"result: ",resDataType:"json"}),t.onAPIsUpdate=t.onAPIsUpdate.bind(k()(t)),t.onTestAPI=t.onTestAPI.bind(k()(t)),t}return x()(r,[{key:"componentWillMount",value:(a=v()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:W.subscribe(this.onAPIsUpdate);case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"onAPIsUpdate",value:function(){var e=W.getState().chooseService;this.setState({serviceData:e})}},{key:"onTestAPI",value:(t=v()(p.a.mark(function e(t){var a,n,r,c,o,s,u,i,l,f;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.serviceName,n=t.cmd,r=t.method,c=t.params,o=this.state.resDataType,e.prev=2,r=r.toUpperCase(),c=JSON.parse("{".concat(c,"}")),"text"===o&&(c.dataType="text"),s="/".concat(a,"/").concat(n),u={method:r},"GET"===r||"HEAD"===r?(i=[],Object.keys(c).forEach(function(e){return i.push(e+"="+c[e])}),s+="?"+i.join("&")):u.body=JSON.stringify(c),e.next=11,fetch(s,u);case 11:if(l=e.sent,f=null,"json"===o)return e.next=16,l.json();e.next=19;break;case 16:f=e.sent,e.next=23;break;case 19:if("text"===o)return e.next=22,l.text();e.next=23;break;case 22:f=e.sent;case 23:this.setState({testContext:JSON.stringify(f)}),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(2),this.setState({testContext:String(e.t0)});case 31:case"end":return e.stop()}},e,this,[[2,27]])})),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var a=this,e=this.state.serviceData;if(!e)return l.a.createElement("div",null);var t=this.state.testContext,n=e.serviceName,r=e.title,c=e.describe,o=e.version,s=e.apiName,u=e.cmd,i=e.method;return l.a.createElement("div",null,l.a.createElement("div",{className:"site-page-header-ghost-wrapper"},l.a.createElement(V.a,{ghost:!1,title:r+"("+n+")",subTitle:c},l.a.createElement($.a,{size:"small",column:3},l.a.createElement($.a.Item,{label:"命令"},l.a.createElement("a",null,u)),l.a.createElement($.a.Item,{label:"调用"},"ctx.app.seneca('",n,"', '",u,"', options)"),l.a.createElement($.a.Item,{label:"版本"},o),l.a.createElement($.a.Item,{label:"描述"},s),l.a.createElement($.a.Item,{label:"网关接口"},"[",i,"] ",l.a.createElement("a",null,"/",n,"/",u))))),l.a.createElement(Z,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},l.a.createElement($.a,{title:"API测试",layout:"vertical",column:1,bordered:!0},l.a.createElement($.a.Item,{label:'输入，例：{"name": "Lucy", "age": 13}'},l.a.createElement(F.a,{style:{margin:"10px 0"}},l.a.createElement(Q.a,{flex:"100px"},"响应数据格式: "),l.a.createElement(Q.a,{flex:"auto"},l.a.createElement(X.a.Group,{defaultValue:"json",buttonStyle:"solid",onChange:function(e){a.setState({resDataType:e.target.value})}},l.a.createElement(X.a.Button,{value:"json"},"json"),l.a.createElement(X.a.Button,{value:"text"},"text"),l.a.createElement(X.a.Button,{value:"formdata",disabled:!0},"formdata"),l.a.createElement(X.a.Button,{value:"buffer",disabled:!0},"buffer")))),l.a.createElement(_,{addonBefore:"Json参数: ",prefix:"{",suffix:"}",placeholder:"输入json格式参数",enterButton:"执行命令",onSearch:function(){var t=v()(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.onTestAPI({serviceName:n,cmd:u,method:i,params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()})),l.a.createElement($.a.Item,{label:"执行结果"},l.a.createElement("div",{style:{overflow:"auto"}},t)))))}}]),r}(l.a.PureComponent);function te(){return l.a.createElement(i.a,null,l.a.createElement(K,null),l.a.createElement(i.a,{style:{padding:"0 24px 24px"}},l.a.createElement(re,null)))}function ae(){return l.a.createElement(i.a,{className:"main-layout"},l.a.createElement(n,null),l.a.createElement(te,null))}function ne(){return l.a.createElement("div",null,l.a.createElement(ae,null))}var re=Object(u.b)(function(e,t){return{}},function(e,t){return{}})(ee),ce=a("fc983e7dc87689180e18");o.a.render(l.a.createElement(u.a,{store:W},l.a.createElement(s.a,null,l.a.createElement(ne,null))),document.querySelector("#root")),ce.a()},a1933480ea41dadc03da:function(e,t,a){},ae088dd9392b8d86db53:function(e,t,a){},fc983e7dc87689180e18:function(e,a,n){"use strict";(function(e){n.d(a,"a",function(){return t});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function t(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}}).call(this,n("26d59f808dff3e83c741"))}},[["a0af27d67c69d80c5afc",1,2]]]);